<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENGINE: include/mem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ENGINE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Project wide memory managerment. Uses MEM_* This provides the function definitions for manipulating heaps and heap managers which allow for all of the dynamic memory allocation to be done at once. The heap data structure also provides memory recycling is needed. The goal of the memory management is to prevent the need to allocate memory more than once during the life time of a program. Instead all of the memory is allocated in predefined heaps which serve as arrays of objects. Memory can also be saved and loaded from disk.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;utils.h&quot;</code><br />
<code>#include &quot;error.h&quot;</code><br />
</div>
<p><a href="mem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_e_m__heap__template.html">MEM_heap_template</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">template structure for creating heaps initially. This only stores the properties of needed to create a heap.  <a href="struct_m_e_m__heap__template.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_e_m__heap.html">MEM_heap</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">heap structure. Contains three heap allocated arrays.  <a href="struct_m_e_m__heap.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">heap manager structure used for creating, storing, and cleaning up heaps. Contains an heap allocated array of heaps. Has a name to identify it from other heap managers.  <a href="struct_m_e_m__heap__manager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1d65e9525c817df9fd473e0841c35df2"><td class="memItemLeft" align="right" valign="top"><a id="a1d65e9525c817df9fd473e0841c35df2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_DEAD</b>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a1d65e9525c817df9fd473e0841c35df2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e69b502e45ae63678efa4272614954"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a61e69b502e45ae63678efa4272614954">MEM_create_heap_template</a>(type,  capacity)&#160;&#160;&#160;<a class="el" href="mem_8h.html#a53c7bf1257b01dd74f88a517bb9612c9">_MEM_create_heap_template</a>(sizeof(type),capacity,#type)</td></tr>
<tr class="memdesc:a61e69b502e45ae63678efa4272614954"><td class="mdescLeft">&#160;</td><td class="mdescRight">a macro which creates a heap template.  <a href="#a61e69b502e45ae63678efa4272614954">More...</a><br /></td></tr>
<tr class="separator:a61e69b502e45ae63678efa4272614954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392ef9eddedd46288e34d40e7d89f25d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a392ef9eddedd46288e34d40e7d89f25d">MEM_get_item</a>(type,  heap,  i)&#160;&#160;&#160;(*(type*)&amp;(heap)-&gt;ptr[i*((heap)-&gt;size_of_object)])</td></tr>
<tr class="memdesc:a392ef9eddedd46288e34d40e7d89f25d"><td class="mdescLeft">&#160;</td><td class="mdescRight">a macro for getting an object with a given index.  <a href="#a392ef9eddedd46288e34d40e7d89f25d">More...</a><br /></td></tr>
<tr class="separator:a392ef9eddedd46288e34d40e7d89f25d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af5cc012508b8b389dddf4200917f0e80"><td class="memItemLeft" align="right" valign="top"><a id="af5cc012508b8b389dddf4200917f0e80"></a>
typedef struct <a class="el" href="struct_m_e_m__heap__template.html">MEM_heap_template</a>&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_heap_template</b></td></tr>
<tr class="separator:af5cc012508b8b389dddf4200917f0e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4e8044836ea131229ea369a4a44bd6"><td class="memItemLeft" align="right" valign="top"><a id="a5a4e8044836ea131229ea369a4a44bd6"></a>
typedef struct <a class="el" href="struct_m_e_m__heap.html">MEM_heap</a>&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_heap</b></td></tr>
<tr class="separator:a5a4e8044836ea131229ea369a4a44bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23490ecfdf88fffbfb88945d09b740e"><td class="memItemLeft" align="right" valign="top"><a id="ab23490ecfdf88fffbfb88945d09b740e"></a>
typedef struct <a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a>&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_heap_manager</b></td></tr>
<tr class="separator:ab23490ecfdf88fffbfb88945d09b740e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c1032095f74aa50f6572cc09c29edf"><td class="memItemLeft" align="right" valign="top"><a id="ae8c1032095f74aa50f6572cc09c29edf"></a>
typedef struct MEM_chunk&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_chunk</b></td></tr>
<tr class="separator:ae8c1032095f74aa50f6572cc09c29edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a53c7bf1257b01dd74f88a517bb9612c9"><td class="memItemLeft" align="right" valign="top"><a id="a53c7bf1257b01dd74f88a517bb9612c9"></a>
<a class="el" href="struct_m_e_m__heap__template.html">MEM_heap_template</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a53c7bf1257b01dd74f88a517bb9612c9">_MEM_create_heap_template</a> (size_t object_size, size_t capacity, UTI_str name)</td></tr>
<tr class="memdesc:a53c7bf1257b01dd74f88a517bb9612c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function for creating heap templates, use the macro version. <br /></td></tr>
<tr class="separator:a53c7bf1257b01dd74f88a517bb9612c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39b5d267f34c36762275f94ccc0a60c"><td class="memItemLeft" align="right" valign="top"><a id="ae39b5d267f34c36762275f94ccc0a60c"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_create_heap</b> (<a class="el" href="struct_m_e_m__heap__template.html">MEM_heap_template</a> template, <a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *result)</td></tr>
<tr class="separator:ae39b5d267f34c36762275f94ccc0a60c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50006cf6233eba5c084ef05317905778"><td class="memItemLeft" align="right" valign="top"><a id="a50006cf6233eba5c084ef05317905778"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_destroy_heap</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *h)</td></tr>
<tr class="separator:a50006cf6233eba5c084ef05317905778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e59952a2b1b45ac43c5197c71a9c941"><td class="memItemLeft" align="right" valign="top"><a id="a8e59952a2b1b45ac43c5197c71a9c941"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_create_heap_manager</b> (UTI_str name, size_t count, void(*heap_init_func)(<a class="el" href="struct_m_e_m__heap__template.html">MEM_heap_template</a> *, void *), void *data, <a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a> *manager)</td></tr>
<tr class="separator:a8e59952a2b1b45ac43c5197c71a9c941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299d2f353eeab602ca9251ec6dbb5ffe"><td class="memItemLeft" align="right" valign="top"><a id="a299d2f353eeab602ca9251ec6dbb5ffe"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_destroy_heap_manager</b> (<a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a> *manager)</td></tr>
<tr class="separator:a299d2f353eeab602ca9251ec6dbb5ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9633b278c328060bdd7459af41000b92"><td class="memItemLeft" align="right" valign="top"><a id="a9633b278c328060bdd7459af41000b92"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_free_item</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *h, size_t index)</td></tr>
<tr class="separator:a9633b278c328060bdd7459af41000b92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6c53e54ceebcdb3c2e88ad24330944"><td class="memItemLeft" align="right" valign="top"><a id="aed6c53e54ceebcdb3c2e88ad24330944"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_next_free_item</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *h, size_t *refrence)</td></tr>
<tr class="separator:aed6c53e54ceebcdb3c2e88ad24330944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80e31aecc032bf338033e20f23a6121"><td class="memItemLeft" align="right" valign="top"><a id="af80e31aecc032bf338033e20f23a6121"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_get_heap_binary_size</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *heap)</td></tr>
<tr class="separator:af80e31aecc032bf338033e20f23a6121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460abea503d38e83a219bb6732bab47e"><td class="memItemLeft" align="right" valign="top"><a id="a460abea503d38e83a219bb6732bab47e"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_get_heap_manager_binary_size</b> (<a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a> *manager)</td></tr>
<tr class="separator:a460abea503d38e83a219bb6732bab47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4310c8aa592da204391df517077af354"><td class="memItemLeft" align="right" valign="top"><a id="a4310c8aa592da204391df517077af354"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_serialize_heap</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *heap, size_t *pos, void *data)</td></tr>
<tr class="separator:a4310c8aa592da204391df517077af354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d7181ab72ea6358fa00813ba0b22b48"><td class="memItemLeft" align="right" valign="top"><a id="a7d7181ab72ea6358fa00813ba0b22b48"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_serialize_heap_manager</b> (<a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a> *manager, size_t *total_size, void *data)</td></tr>
<tr class="separator:a7d7181ab72ea6358fa00813ba0b22b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a024047939f783ebc6375f176eb3dd384"><td class="memItemLeft" align="right" valign="top"><a id="a024047939f783ebc6375f176eb3dd384"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_deserialize_heap</b> (<a class="el" href="struct_m_e_m__heap.html">MEM_heap</a> *heap, size_t *pos, void *data)</td></tr>
<tr class="separator:a024047939f783ebc6375f176eb3dd384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcd35a783ab0864585f949ef90a9e0a"><td class="memItemLeft" align="right" valign="top"><a id="aefcd35a783ab0864585f949ef90a9e0a"></a>
ERR_error&#160;</td><td class="memItemRight" valign="bottom"><b>MEM_deserialize_heap_manager</b> (<a class="el" href="struct_m_e_m__heap__manager.html">MEM_heap_manager</a> *manager, size_t *pos, void *data)</td></tr>
<tr class="separator:aefcd35a783ab0864585f949ef90a9e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Project wide memory managerment. Uses MEM_* This provides the function definitions for manipulating heaps and heap managers which allow for all of the dynamic memory allocation to be done at once. The heap data structure also provides memory recycling is needed. The goal of the memory management is to prevent the need to allocate memory more than once during the life time of a program. Instead all of the memory is allocated in predefined heaps which serve as arrays of objects. Memory can also be saved and loaded from disk. </p>
<dl class="section author"><dt>Author</dt><dd>Derek Mallon </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a61e69b502e45ae63678efa4272614954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61e69b502e45ae63678efa4272614954">&sect;&nbsp;</a></span>MEM_create_heap_template</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_create_heap_template</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">capacity&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="mem_8h.html#a53c7bf1257b01dd74f88a517bb9612c9">_MEM_create_heap_template</a>(sizeof(type),capacity,#type)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>a macro which creates a heap template. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>pass the type of the object. </td></tr>
    <tr><td class="paramname">capacity</td><td>the capacity of the heap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a heap template. </dd></dl>

</div>
</div>
<a id="a392ef9eddedd46288e34d40e7d89f25d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392ef9eddedd46288e34d40e7d89f25d">&sect;&nbsp;</a></span>MEM_get_item</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_get_item</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">heap, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(type*)&amp;(heap)-&gt;ptr[i*((heap)-&gt;size_of_object)])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>a macro for getting an object with a given index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>pass the type of the object (used for the casting). </td></tr>
    <tr><td class="paramname">heap</td><td>pass a pointer to the heap which the object is located in. </td></tr>
    <tr><td class="paramname">i</td><td>the index which will returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the object (not a copy). </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
